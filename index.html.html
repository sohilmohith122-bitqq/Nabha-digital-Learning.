<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nabha Digital Learning Platform</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        /* Custom SVG pattern for the sidebar */
        .svg-pattern-bg {
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%236366f1' fill-opacity='0.4'%3E%3Cpath d='M0 0h20v20H0z'/%3E%3Cpath d='M11.536 2.5a.5.5 0 01.401.597l-3 13a.5.5 0 01-.998-.03l3-13a.5.5 0 01.597-.467z'/%3E%3C/g%3E%3C/svg%3E");
            background-color: #4f46e5;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <!-- Main Container -->
    <div id="main-app" class="bg-white shadow-2xl rounded-3xl w-full max-w-5xl overflow-hidden md:flex transform transition-all duration-300 scale-95 hover:scale-100">

        <!-- Left Sidebar / Branding -->
        <div class="svg-pattern-bg text-white p-8 md:p-12 md:w-1/3 flex flex-col justify-between relative rounded-l-3xl">
            <div class="absolute inset-0 bg-indigo-600 bg-opacity-90 rounded-l-3xl"></div>
            <div class="relative z-10 flex flex-col h-full justify-center">
                <h1 class="text-4xl font-extrabold mb-2 text-center md:text-left">ਨਬਹਾ ਲਰਨਿੰਗ</h1>
                <h2 class="text-xl font-light mb-4 text-center md:text-left">Nabha Digital Learning Platform</h2>
                <p class="font-light text-indigo-200 text-center md:text-left">
                    Your gateway to quality education, anytime, anywhere.
                </p>
                <div class="mt-8">
                    <img src="https://placehold.co/400x300/a5b4fc/4338ca?text=Empowerment" alt="Learning illustration" class="rounded-lg shadow-lg mx-auto md:mx-0">
                </div>
            </div>
        </div>

        <!-- Right Content / Main UI -->
        <div class="p-8 md:p-12 md:w-2/3">

            <!-- Login Section -->
            <div id="login-screen" class="space-y-6">
                <h3 class="text-3xl font-bold text-gray-800 text-center">Welcome to Nabha!</h3>
                <p class="text-gray-600 text-center">Please select your role to continue.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
                    <button onclick="showStudentLogin()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-4 px-6 rounded-xl transition-transform transform hover:scale-105 shadow-lg hover:shadow-xl">
                        Student Login
                    </button>
                    <button onclick="showTeacherLogin()" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-4 px-6 rounded-xl transition-transform transform hover:scale-105 shadow-lg hover:shadow-xl">
                        Teacher Login
                    </button>
                </div>
            </div>

            <!-- Student Login Form -->
            <div id="student-login-form" class="hidden space-y-6">
                <h3 class="text-3xl font-bold text-gray-800 text-center">Student Access</h3>
                <input type="text" id="student-id" placeholder="Student ID (e.g., S123)" class="w-full p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors">
                <button onclick="studentLogin()" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl">
                    Log In as Student
                </button>
                <button onclick="showLoginScreen()" class="w-full text-sm text-gray-500 mt-4 hover:underline">
                    &larr; Back to Role Selection
                </button>
            </div>

            <!-- Teacher Login Form -->
            <div id="teacher-login-form" class="hidden space-y-6">
                <h3 class="text-3xl font-bold text-gray-800 text-center">Teacher Access</h3>
                <input type="text" id="teacher-id" placeholder="Teacher ID (e.g., T101)" class="w-full p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors">
                <input type="password" id="teacher-password" placeholder="Password" class="w-full p-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors">
                <button onclick="teacherLogin()" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-4 px-6 rounded-xl shadow-lg hover:shadow-xl">
                    Log In as Teacher
                </button>
                <button onclick="showLoginScreen()" class="w-full text-sm text-gray-500 mt-4 hover:underline">
                    &larr; Back to Role Selection
                </button>
            </div>

            <!-- Student Dashboard -->
            <div id="student-dashboard" class="hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-semibold text-gray-800">Student Dashboard</h3>
                    <button onclick="logout()" class="text-sm text-red-500 hover:text-red-700 font-medium">Logout</button>
                </div>

                <!-- Profile Info -->
                <div class="bg-blue-50 p-6 rounded-xl mb-6 border border-blue-200">
                    <p class="text-blue-800 font-medium text-lg">Hello, <span id="student-name"></span>!</p>
                    <p class="text-blue-600 text-sm">Welcome to your learning journey. Check your progress and lessons below.</p>
                </div>

                <!-- Subject List -->
                <div id="subject-list" class="space-y-4">
                    <!-- Subjects will be dynamically added here -->
                </div>
            </div>

            <!-- Teacher Dashboard -->
            <div id="teacher-dashboard" class="hidden">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-2xl font-semibold text-gray-800">Teacher Dashboard</h3>
                    <button onclick="logout()" class="text-sm text-red-500 hover:text-red-700 font-medium">Logout</button>
                </div>
                <div class="bg-green-50 p-6 rounded-xl mb-6 border border-green-200">
                    <p class="text-green-800 font-medium text-lg">Hello, <span id="teacher-name"></span>!</p>
                    <p class="text-green-600 text-sm">Here are your students' progress and resources.</p>
                </div>

                <!-- Student Progress List -->
                <div id="teacher-student-list" class="space-y-4">
                    <h4 class="text-lg font-semibold text-gray-700 mb-2">Student Progress</h4>
                    <!-- Student list will be dynamically added here -->
                </div>
            </div>

            <!-- Course Detail View -->
            <div id="course-view" class="hidden">
                <button onclick="showStudentDashboard()" class="text-sm text-gray-500 mb-4 hover:underline">&larr; Back to Dashboard</button>
                <h3 id="course-title" class="text-2xl font-semibold text-gray-800 mb-4"></h3>

                <!-- Lessons and Content -->
                <div id="lesson-list" class="space-y-4">
                    <!-- Lessons will be dynamically added here -->
                </div>
            </div>

            <!-- Quiz View -->
            <div id="quiz-view" class="hidden">
                <button onclick="showCourseView()" class="text-sm text-gray-500 mb-4 hover:underline">&larr; Back to Course</button>
                <h3 id="quiz-title" class="text-2xl font-semibold text-gray-800 mb-4"></h3>
                <div id="quiz-container" class="space-y-4">
                    <!-- Quiz questions will be dynamically added here -->
                </div>
                <button onclick="submitQuiz()" class="w-full bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-3 px-6 rounded-xl mt-6 shadow-md">
                    Submit Quiz
                </button>
                <div id="quiz-result" class="mt-4 p-4 rounded-xl text-center font-bold hidden"></div>
            </div>

            <!-- Custom Message Box for Alerts -->
            <div id="message-box" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden">
                <div class="bg-white p-6 rounded-xl shadow-lg w-full max-w-sm">
                    <p id="message-text" class="text-gray-800 text-center mb-4"></p>
                    <button onclick="closeMessageBox()" class="w-full bg-blue-500 text-white font-semibold py-2 rounded-lg">OK</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // --- Data Mockup ---
        // This is where we simulate a database for a real app.
        const users = {
            'S123': { name: 'Priya Sharma', role: 'student', progress: { 'math': 50, 'science': 20, 'engineering-graphics': 0, 'discrete-math': 0, 'digital-principles': 0 } },
            'S124': { name: 'Raj Singh', role: 'student', progress: { 'math': 80, 'science': 60, 'engineering-graphics': 0, 'discrete-math': 0, 'digital-principles': 0 } },
            'S3333': { name: 'Stebin', role: 'student', progress: { 'math': 10, 'science': 0, 'engineering-graphics': 0, 'discrete-math': 0, 'digital-principles': 0 } },
            'T101': { name: 'Mr. Gupta', role: 'teacher', password: 's2222' },
            'T5009': { name: 'Stebin', role: 'teacher', password: 't5009pass' },
            's2222': { name: 'Ms. Sharma', role: 'teacher', password: 's2222' } // New teacher user added
        };

        const subjects = [
            { id: 'math', name: 'Mathematics', namePunjabi: 'ਗਣਿਤ' },
            { id: 'science', name: 'Science', namePunjabi: 'ਵਿਗਿਆਨ' },
            { id: 'english', name: 'English', namePunjabi: 'ਅੰਗਰੇਜ਼ੀ' },
            { id: 'engineering-graphics', name: 'Engineering Graphics', namePunjabi: 'ਇੰਜੀਨੀਅਰਿੰਗ ਗ੍ਰਾਫਿਕਸ' },
            { id: 'discrete-math', name: 'Discrete Mathematics', namePunjabi: 'ਡਿਸਕ੍ਰੀਟ ਗਣਿਤ' },
            { id: 'digital-principles', name: 'Digital Principles and Computer Organization', namePunjabi: 'ਡਿਜੀਟਲ ਸਿਧਾਂਤ ਅਤੇ ਕੰਪਿਊਟਰ ਸੰਗਠਨ' }
        ];

        const courses = {
            'math': {
                title: 'Introduction to Algebra',
                lessons: [
                    { title: 'Algebraic Expressions', type: 'video', url: 'https://www.youtube.com/embed/O-L2706t-jM' },
                    { title: 'Solving Linear Equations', type: 'text', content: 'In this lesson, we will learn how to solve simple linear equations with one variable. A linear equation is an equation that can be written in the form $ax+b=0$.' },
                    { title: 'Practice Quiz', type: 'quiz' }
                ]
            },
            'science': {
                title: 'States of Matter',
                lessons: [
                    { title: 'Solids, Liquids, and Gases', type: 'video', url: 'https://www.youtube.com/embed/jJ2S7eP72y0' },
                    { title: 'Physical Changes', type: 'text', content: 'A physical change is a type of change in which the form of matter is altered but not its chemical makeup. This includes processes like melting, freezing, and boiling.' },
                    { title: 'Quiz on Matter', type: 'quiz' }
                ]
            },
            'engineering-graphics': {
                title: 'Engineering Graphics',
                lessons: [
                    { title: 'Engineering Graphics Important Questions', type: 'video', url: 'https://www.youtube.com/embed/xQM6GHTKm18' },
                    { title: 'Free Hand Sketching in Tamil', type: 'video', url: 'https://www.youtube.com/embed/SWumP8rJwec' },
                    { title: 'GE3251 Engineering Graphics Apr/May 2022', type: 'video', url: 'https://www.youtube.com/embed/KmR76376Tks' },
                    { title: 'GE 3251|Engineering Graphics|important questions', type: 'video', url: 'https://www.youtube.com/embed/qFvg2kgc63c' }
                ]
            },
            'discrete-math': {
                title: 'Discrete Mathematics MA3354',
                lessons: [
                    { title: 'Discrete Mathematics Important Questions', type: 'video', url: 'https://www.youtube.com/embed/a4sejF0POIo' },
                    { title: 'PCNF in Tamil', type: 'video', url: 'https://www.youtube.com/embed/5x5SX9koqp8' }
                ]
            },
            'digital-principles': {
                title: 'Digital Principles and Computer Organization CS3351',
                lessons: [
                    { title: 'JK Flipflop in Tamil', type: 'video', url: 'https://www.youtube.com/embed/q_-XnbYJ9Y0' },
                    { title: 'Digital Principles and Computer Organization Important Questions', type: 'video', url: 'https://www.youtube.com/embed/CSxbuamuVu4' }
                ]
            }
        };

        const quizzes = {
            'math': [
                { question: 'What is the value of $x$ in $2x + 5 = 15$?', options: ['5', '10', '15'], answer: '5' },
                { question: 'Simplify the expression $3a + 4a - 2a$.', options: ['5a', '7a', '9a'], answer: '5a' }
            ],
            'science': [
                { question: 'What is the process of a liquid turning into a gas?', options: ['Melting', 'Boiling', 'Freezing'], answer: 'Boiling' },
                { question: 'Which state of matter has a fixed shape and volume?', options: ['Liquid', 'Gas', 'Solid'], answer: 'Solid' }
            ]
        };

        // --- UI State & Logic ---
        let currentUser = null;
        let currentCourse = null;
        let currentQuiz = null;

        function showScreen(screenId) {
            const screens = ['login-screen', 'student-login-form', 'teacher-login-form', 'student-dashboard', 'teacher-dashboard', 'course-view', 'quiz-view'];
            screens.forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(screenId).classList.remove('hidden');
        }

        function showLoginScreen() {
            showScreen('login-screen');
        }

        function showStudentLogin() {
            document.getElementById('student-id').value = '';
            showScreen('student-login-form');
        }

        function showTeacherLogin() {
            document.getElementById('teacher-id').value = '';
            document.getElementById('teacher-password').value = '';
            showScreen('teacher-login-form');
        }

        function studentLogin() {
            const studentId = document.getElementById('student-id').value.toUpperCase().trim();
            if (users[studentId] && users[studentId].role === 'student') {
                currentUser = users[studentId];
                document.getElementById('student-name').innerText = currentUser.name;
                renderSubjectList();
                showScreen('student-dashboard');
            } else {
                showMessage("Invalid Student ID. Please try again.");
            }
        }

        function teacherLogin() {
            const teacherId = document.getElementById('teacher-id').value.trim();
            const password = document.getElementById('teacher-password').value.trim();
            
            if (users[teacherId] && users[teacherId].role === 'teacher' && users[teacherId].password === password) {
                currentUser = users[teacherId];
                document.getElementById('teacher-name').innerText = currentUser.name;
                renderTeacherDashboard();
                showScreen('teacher-dashboard');
            } else {
                showMessage("Invalid ID or password. Please try again.");
            }
        }

        function logout() {
            currentUser = null;
            currentCourse = null;
            currentQuiz = null;
            showLoginScreen();
        }

        function renderSubjectList() {
            const listContainer = document.getElementById('subject-list');
            listContainer.innerHTML = '';
            subjects.forEach(subject => {
                const progress = currentUser.progress[subject.id] || 0;
                const card = document.createElement('div');
                card.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 cursor-pointer hover:shadow-lg transition-shadow';
                card.onclick = () => showCourseView(subject.id);
                card.innerHTML = `
                    <h4 class="text-xl font-semibold text-gray-800">${subject.name}</h4>
                    <p class="text-gray-500 text-sm mb-4">${subject.namePunjabi}</p>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-blue-600 h-2.5 rounded-full" style="width: ${progress}%"></div>
                    </div>
                    <p class="text-sm text-gray-600 mt-2">${progress}% Complete</p>
                `;
                listContainer.appendChild(card);
            });
        }

        function showStudentDashboard() {
            showScreen('student-dashboard');
        }

        function showCourseView(subjectId) {
            currentCourse = courses[subjectId];
            if (!currentCourse) {
                showMessage("Course not found.");
                return;
            }
            document.getElementById('course-title').innerText = currentCourse.title;
            const lessonList = document.getElementById('lesson-list');
            lessonList.innerHTML = '';
            currentCourse.lessons.forEach(lesson => {
                let contentHtml = '';
                if (lesson.type === 'video') {
                    contentHtml = `<div class="relative w-full h-0 pb-[56.25%] overflow-hidden rounded-xl shadow-md"><iframe src="${lesson.url}" class="absolute top-0 left-0 w-full h-full" frameborder="0" allowfullscreen></iframe></div>`;
                } else if (lesson.type === 'text') {
                    contentHtml = `<div class="bg-gray-50 p-6 rounded-xl border border-gray-200 text-gray-700">${lesson.content}</div>`;
                }
                const lessonCard = document.createElement('div');
                lessonCard.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200 space-y-4';
                lessonCard.innerHTML = `
                    <h4 class="text-lg font-semibold text-gray-800">${lesson.title}</h4>
                    ${contentHtml}
                    ${lesson.type !== 'quiz' ? `<button class="download-btn w-full mt-4 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 rounded-lg transition-transform transform hover:scale-105" onclick="downloadContent(this)">Download for Offline</button>` : `<button onclick="showQuizView('${subjectId}')" class="w-full mt-4 bg-purple-500 hover:bg-purple-600 text-white font-semibold py-2 rounded-lg">Start Quiz</button>`}
                `;
                lessonList.appendChild(lessonCard);
            });
            showScreen('course-view');
        }

        function downloadContent(button) {
            button.innerText = 'Downloaded!';
            button.classList.remove('bg-indigo-500');
            button.classList.add('bg-gray-400');
            button.disabled = true;
            showMessage("Content downloaded successfully for offline use!");
        }

        function showQuizView(subjectId) {
            currentQuiz = quizzes[subjectId];
            if (!currentQuiz) {
                showMessage("Quiz not found.");
                return;
            }
            document.getElementById('quiz-title').innerText = currentCourse.title + ' Quiz';
            const quizContainer = document.getElementById('quiz-container');
            quizContainer.innerHTML = '';
            currentQuiz.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'bg-gray-50 p-6 rounded-xl border border-gray-200 space-y-3';
                questionDiv.innerHTML = `
                    <p class="font-medium text-gray-800">Question ${index + 1}: ${q.question}</p>
                    <div class="space-y-2">
                        ${q.options.map(option => `
                            <label class="flex items-center space-x-2 text-gray-700">
                                <input type="radio" name="question-${index}" value="${option}" class="form-radio text-blue-500">
                                <span>${option}</span>
                            </label>
                        `).join('')}
                    </div>
                `;
                quizContainer.appendChild(questionDiv);
            });
            document.getElementById('quiz-result').classList.add('hidden');
            showScreen('quiz-view');
        }

        function submitQuiz() {
            let score = 0;
            let totalQuestions = currentQuiz.length;
            currentQuiz.forEach((q, index) => {
                const selectedOption = document.querySelector(`input[name="question-${index}"]:checked`);
                if (selectedOption && selectedOption.value === q.answer) {
                    score++;
                }
            });

            const resultDiv = document.getElementById('quiz-result');
            resultDiv.classList.remove('hidden');
            let message = `You scored ${score} out of ${totalQuestions}.`;
            if (score === totalQuestions) {
                message += " Excellent work!";
                resultDiv.classList.remove('bg-red-200');
                resultDiv.classList.add('bg-green-200');
            } else {
                resultDiv.classList.remove('bg-green-200');
                resultDiv.classList.add('bg-red-200');
            }
            resultDiv.innerText = message;
        }

        function renderTeacherDashboard() {
            const studentList = document.getElementById('teacher-student-list');
            studentList.innerHTML = '<h4 class="text-lg font-semibold text-gray-700 mb-2">Student Progress</h4>';
            for (const id in users) {
                const user = users[id];
                if (user.role === 'student') {
                    const studentCard = document.createElement('div');
                    studentCard.className = 'bg-white p-6 rounded-xl shadow-md border border-gray-200';
                    let progressHtml = '';
                    for (const subjectId in user.progress) {
                        progressHtml += `<p class="text-sm text-gray-600 mt-2">${subjects.find(s => s.id === subjectId).name}: ${user.progress[subjectId]}% Complete</p>`;
                    }
                    studentCard.innerHTML = `
                        <h5 class="text-lg font-semibold text-gray-800">${user.name}</h5>
                        <p class="text-sm text-gray-500">ID: ${id}</p>
                        ${progressHtml}
                    `;
                    studentList.appendChild(studentCard);
                }
            }
        }

        function showMessage(message) {
            const messageBox = document.getElementById('message-box');
            document.getElementById('message-text').innerText = message;
            messageBox.classList.remove('hidden');
        }

        function closeMessageBox() {
            document.getElementById('message-box').classList.add('hidden');
        }

        // --- Initial View ---
        document.addEventListener('DOMContentLoaded', () => {
            showLoginScreen();
        });

    </script>
</body>
</html>
